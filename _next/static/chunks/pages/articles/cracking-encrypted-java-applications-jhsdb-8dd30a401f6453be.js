(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[362],{5237:function(s,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/cracking-encrypted-java-applications-jhsdb",function(){return i(475)}])},475:function(s,n,i){"use strict";i.r(n),i.d(n,{__N_SSG:function(){return c}});var e=i(5893),r=i(1151);function t(s){let n=Object.assign({h1:"h1",p:"p",h2:"h2",a:"a",img:"img"},(0,r.ah)(),s.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{children:"使用jhsdb（HotSpot Debugger）破解加密的Java应用程序"}),"\n",(0,e.jsx)(n.p,{children:"Java代码保护的一种解决方案是类文件加密。这种解决方案通过自定义加载器加载加密的类文件或jar文件，由于JVM的Attach机制的存在，这种方法是无效的，并且可以使用JDK附带的工具轻松破解。"}),"\n",(0,e.jsx)(n.h2,{id:"",children:"示例应用程序"}),"\n",(0,e.jsx)(n.p,{children:"以下是一个带有简单摆动窗口和按钮的示例应用程序。"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:"https://github.com/3-keys/test-swing-app",children:"https://github.com/3-keys/test-swing-app"})}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*X7gk1cFs2q_rbFUL1AWGAg.png",alt:"img"})}),"\n",(0,e.jsx)(n.h2,{id:"",children:"加密应用程序"}),"\n",(0,e.jsx)(n.p,{children:"使用Eclipse导出一个可运行的jar文件，并使用加密工具对jar文件进行加密。加密后，jar文件的结构如下："}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*g3newuhVki74x-88x5eCMA.png",alt:"img"})}),"\n",(0,e.jsx)(n.p,{children:"test-swing-app.jar是加密的jar文件数据，Launcher类是此工具的自定义加载类，加密的jar包仍通过标准的java -jar命令运行"}),"\n",(0,e.jsx)(n.h2,{id:"",children:"破解加密应用"}),"\n",(0,e.jsx)(n.p,{children:"首先，运行加密的jar文件，然后找到JDK的bin目录，你应该能找到一个jshdb文件。"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1_nsxbwNJrGJB4mpzsQv55VA.png",alt:"1_nsxbwNJrGJB4mpzsQv55VA"})}),"\n",(0,e.jsx)(n.p,{children:"执行jhsdb hsdb，打开HotSpot调试器，如果是在Windows下，你可能需要以管理员身份运行，点击文件选择附加到HotSpot进程…"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*hsrnzmr8hzV47HTnARd3Dw.png",alt:"img"})}),"\n",(0,e.jsx)(n.p,{children:"通过Linux系统的ps aux | grep java命令，Windows系统通过任务管理器找到进程的pid，在下面的对话框中，输入进程pid"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*FNgXH0LmGN0eZ7TqxLHNsg.png",alt:"img"})}),"\n",(0,e.jsx)(n.p,{children:"成功附加后，点击工具->类浏览器"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*Tc6T4OeO0QjfrVDCAYZ7sQ.png",alt:"img"})}),"\n",(0,e.jsx)(n.p,{children:"类浏览器包含了所有已加载类的信息，搜索com.example，你可能会看到com.example下的所有类"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*jRo1F__YxVTXXuyPizrTLw.png",alt:"img"})}),"\n",(0,e.jsxs)(n.p,{children:["点击com.example.TestWindow ",(0,e.jsx)(n.a,{href:"http://twitter.com/0x0000",children:"@0x0000"}),"…. 然后点击“创建 .class 文件”"]}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*rnRW_jIKIeCqNcS5t_DwWA.png",alt:"img"})}),"\n",(0,e.jsx)(n.p,{children:"cd到之前执行jhsdb命令的目录，你可以看到生成的类文件"}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://miro.medium.com/v2/resize:fit:1400/1*YqNI-YMoO34fo0aBnzgYoQ.png",alt:"img"})}),"\n",(0,e.jsxs)(n.p,{children:["使用 ",(0,e.jsx)(n.a,{href:"https://github.com/deathmarine/Luyten",children:"Luyten"})," 或 ",(0,e.jsx)(n.a,{href:"https://github.com/skylot/jadx",children:"jadx"})," 打开类文件，你可以看到反编译的代码"]}),"\n",(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:"https://vlinx.io/resources/images/1*zQadcuf88E2Jw_5PkqvlqQ.png",alt:"img"})})]})}var c=!0;n.default=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),s.components);return n?(0,e.jsx)(n,Object.assign({},s,{children:(0,e.jsx)(t,s)})):t(s)}}},function(s){s.O(0,[774,888,179],function(){return s(s.s=5237)}),_N_E=s.O()}]);